.SH Version 2.4.0 (2020\-05\-16)
.PP
This release drops special Web browser requirements to access 
.BR dasht-server (1),

improves error messages in 
.BR dasht-docset-install (1), 
ensures clean up of stale
files that contain whitespace in their names, and resolves a few other issues.
.SS Minor:
.RS
.IP \(bu 2
.BR dasht-server-http (1): 
serve local \fB\fCfile://\fR URLs through \fB\fChttp://\fR URLs.
.PP
Users no longer have to use special browsers or special configurations
that allow the loading of \fB\fCfile://\fR links from \fB\fChttp://127.0.0.1\fR URLs.
All browsers can now natively access the 
.BR dasht-server (1) 
search engine.
.PP
See \[la]https://github.com/sunaku/dasht/issues/45\[ra]
.RE
.SS Patch:
.RS
.IP \(bu 2
.BR dasht-docsets-update (1): 
remove stale files with whitespace in names.
.PP
Thanks to @frodeaa for reporting this issue and contributing a patch:
.PP
.RS
Replace \fB\fCxargs\fR with \fB\fCwhile read\fR and avoid globbing. The same could be
achived by using \fB\fCxargs \-0\fR (GNU/BSD) if newline is replaced with \fB\fC\\0\fR\&.
.PP
.RS
.nf
tr '\\n' '\\0' | xargs \-0 sh \-e \-u \-c '
.fi
.RE
.RE
.PP
See \[la]https://github.com/sunaku/dasht/issues/35\[ra]
.IP \(bu 2
.BR dasht-server-http (1): 
escape "C++" docset name as \fB\fC^C\\+\\+$\fR regex.
.PP
When the "C++" docset was selected from the "in docsets" dropdown menu in
.BR dasht-server (1), 
the plus signs weren't properly escaped per regex syntax.
.PP
See \[la]https://github.com/sunaku/dasht/issues/49\[ra]
.IP \(bu 2
.BR dasht-docsets-install (1): 
validate 
.BR gzip (1) 
integrity before extraction.
.PP
This avoids cryptic errors from tarball extraction:
.PP
.RS
.nf
gzip: stdin: unexpected end of file
tar: Child returned status 1
tar: Error is not recoverable: exiting now
.fi
.RE
.PP
By pointing out the cause of the error to the user:
.PP
.RS
.nf
gzip: Apple_Guides_and_Sample_Code.tgz: unexpected end of file
.fi
.RE
.IP \(bu 2
.BR dasht-docsets-install (1): 
restore support for older 
.BR wget (1) 
versions.
.PP
Older wget versions don't support the \fB\fC\-\-show\-progress\fR option:
.PP
.RS
.nf
wget: unrecognized option '\-\-show\-progress'
Usage: wget [OPTION]... [URL]...

Try ‘wget \-\-help’ for more options.
.fi
.RE
.IP \(bu 2
.BR dasht-query-line (1): 
update URI fragments for HTML and CSS docsets.
.RE
.SH Version 2.3.0 (2018\-10\-09)
.PP
This release provides better error messaging for first\-time users who try to
search immediately after installing dasht but before they install any docsets.
It also fixes some HTML rendering issues and improves portability under macOS.
.SS Minor:
.RS
.IP \(bu 2
Notify user when no docsets installed for searching.
.IP \(bu 2
wget: don't be verbose but show download progress.
.RE
.SS Patch:
.RS
.IP \(bu 2
GH\-28: some docsets embed \fB\fC<dash>\fR XML in URL fields.
.IP \(bu 2
GH\-25: HTML 4 browsers don't support \fB\fC&apos;\fR entity.
.PP
See \[la]https://stackoverflow.com/a/2083770\[ra] which refers to this spec:
.TP
C.16. The Named Character Reference \fB\fC&apos;\fR
        \[la]https://www.w3.org/TR/xhtml1/#C_16\[ra]
.IP
The named character reference \fB\fC&apos;\fR (the apostrophe, U+0027) was
introduced in XML 1.0 but does not appear in HTML. Authors should
therefore use \fB\fC&#39;\fR instead of \fB\fC&apos;\fR to work as expected in HTML
4 user agents.
.IP \(bu 2
GH\-31: macOS error upon rmdir: illegal option \-\- v.
.PP
Thanks to Frode Aannevik (@frodeaa) for reporting this issue.
.RE
.SS Other:
.RS
.IP \(bu 2
README: add installation method for macOS Homebrew.
.IP \(bu 2
README: require gawk; Debian's default mawk hangs.
.RE
.SH Version 2.2.0 (2017\-08\-15)
.PP
This release fixes the ability to install new docsets (which was broken since
July 2017 due to unannounced, incompatible upstream changes in docset hosting),
improves portability, search form usability, and saves space updating docsets.
.SS Minor:
.RS
.IP \(bu 2
When a docset is updated, any obsolete files left behind by the previous
version of the docset's installation are now deleted to save disk space.
.IP \(bu 2
\fB\fCdasht\-server\fR: update styling for a more user\-friendly search form:
.RS
.IP \(bu 2
Make submit button as tall as the entire form so it's easy to hit.
.IP \(bu 2
Use monospace font throughout the form to enhance ilIO0o variance.
.IP \(bu 2
Shorten placeholder text to fit default width of popular browsers.
.RE
.RE
.SS Patch:
.RS
.IP \(bu 2
GH\-23: Kapeli moved docset download links into Git, breaking our ability
to install new docsets (because the download links page no longer exists).
.PP
\[la]https://github.com/zealdocs/zeal/issues/294#issuecomment-84435400\[ra]
.IP \(bu 2
POSIX 
.BR sed (1) 
reserves the right to reject the semicolon command separator.
.PP
Per \[la]http://pubs.opengroup.org/onlinepubs/009695399/utilities/sed.html\[ra]
.PP
.RS
Historically, the sed ! and } editing commands did not permit multiple
commands on a single line using a semicolon as a command delimiter.
Implementations are permitted, but not required, to support this
extension.
.RE
.RE
.SS Other:
.RS
.IP \(bu 2
\fB\fCdasht\-server\fR: recommend Chrome browser with LocalLinks extension \[la]https://chrome.google.com/webstore/detail/locallinks/jllpkdkcdjndhggodimiphkghogcpida\[ra]\&.
.IP \(bu 2
README: show how to set up $MANPATH for easy 
.BR man (1).
.IP \(bu 2
tar: use UNIX\-style invocation syntax: \-z after \-f.
.IP \(bu 2
sed: use pipe delimiters when dealing with slashes.
.RE
.SH Version 2.1.0 (2016\-05\-28)
.PP
This release improves the feedback users and scripts get from dasht scripts,
fixes the ability to run dasht from non\-setpgid() environments like (Neo)Vim,
adds TAB completion for ZSH, and provides screencasts for prospective users.
.SS Minor:
.RS
.IP \(bu 2
.BR dasht (1) 
now automatically opens the first search result if only one.
.IP \(bu 2
dasht\-query\-* scripts now exit with status 44 when no results found.
.IP \(bu 2
TAB completion for ZSH (see \fB\fCetc/zsh/\fR folder) for all dasht scripts.
.PP
Pressing TAB at the first argument completes \fB\fC\&''\fR and puts you on the
second argument, which is perfect for skipping the pattern altogether.
Pressing TAB at the second argument completes installed docset names.
.PP
Thanks to Tobias Mersmann (@tmerse) for suggesting this feature and
providing starter code at \[la]https://github.com/sunaku/dasht/issues/10\[ra]\&.
.IP \(bu 2
.BR dasht-server-http (1) 
now shows "no results found" message in browser.
.RE
.SS Patch:
.RS
.IP \(bu 2
.BR dasht-query-line (1) 
now sets default URI fragment for Erlang docset.
.PP
This affects modules, like the "dets" result in \fB\fCdasht dets erlang\fR\&.
.IP \(bu 2
.BR dasht-server-http (1) 
now opens search result links in the same window.
.PP
.BR w3m (1) 
opens search result links in the \fIsame\fP window, so don't make
the experience any different in browsers connected to 
.BR dasht-server (1).
.IP \(bu 2
.BR dasht (1) 
has revised pipefail emulation since Vim doesn't setpgid().
.PP
When \fB\fC:!dasht some_query_that_has_no_results_here\fR is run inside Vim,
the 
.BR w3m (1) 
instance still lives on, even though no results were found,
because the child processes of 
.BR dasht (1) 
don't inherit its pid as pgid.
.PP
That's why terminating all children with 
.BR kill (1) 
on pgid doesn't work.
Instead, the new strategy is to selectively kill 
.BR w3m (1) 
first and then
.BR dasht (1) 
to achieve the desired effect: no more 
.BR w3m (1) 
and nonzero exit.
.IP \(bu 2
.BR dasht (1) 
now avoids \fB\fC/bin/sh: line 1: Terminated\fR warning under BASH.
.PP
To ensure normal SIGTERM propagation to children, trap SIGUSR1 instead.
.IP \(bu 2
Revised "no results found" messages for HTML and text user interfaces.
.RE
.SS Other:
.RS
.IP \(bu 2
README: add screencasts of dasht in the terminal and browser:
.PP
Watch the "dasht in a terminal \[la]https://vimeo.com/159462598\[ra]"
and "dasht in a browser \[la]https://vimeo.com/159462774\[ra]" screencasts.
.IP \(bu 2
README: add link to vim\-dasht plugin for (Neo)Vim integration:
.PP
\[la]https://github.com/sunaku/vim-dasht\[ra]
.RE
.SH Version 2.0.0 (2016\-03\-17)
.PP
This release improves the local search engine's responsiveness, usability, and
appearance (especially on small displays, like those found in mobile devices);
improves search term highlighting; and fixes escaping bugs and HTML5 validity.
.SS Major:
.RS
.IP \(bu 2
.BR dasht-query-exec (1) 
now groups by first letter when nothing is searched.
.PP
This gives you a better overview of the breadth of available topics (A\-Z)
than the previous approach of simply returning the first 100 topics did.
.IP \(bu 2
.BR dasht-query-html (1) 
now wraps its HTML output, if any, in \fB\fC<table>\fR tags.
.PP
This moves the printing of HTML \fB\fC<table>\fR tags into 
.BR dasht-query-html (1)

and makes 
.BR dasht (1) 
run 
.BR w3m (1) 
eagerly, which provides visual feedback to
the user when a large HTML document is being read and buffered, and in
the case where no results are found: terminate with a message on stderr.
.RE
.SS Minor:
.RS
.IP \(bu 2
.BR dasht-server-http (1) 
now streams search results to you as they are found.
.PP
Serve the HTML header and search form immediately\-\-\-before the search is
even performed\-\-\-so that the user instantly (and at the very least) sees
the search form in case they decide to abort the HTTP transfer partway.
.IP \(bu 2
.BR dasht-server-http (1) 
now provides a drop\-down menu for docset selection.
.PP
Drop the HTML5 \fB\fC<datalist>\fR because it can only suggest a single item, and
that too only when the text field is empty!  Instead, provide a \fB\fC<select>\fR
drop\-down menu from which the user can choose a single item and build up
multiple docset selections iteratively, with repeated form submissions.
.IP \(bu 2
.BR dasht-server-http (1) 
now word\-wraps search results to fit small displays.
.PP
Insert word\-break opportunity \fB\fC<wbr>\fR tags at the end of capitalized
words, runs of lowercase text, numbers, and punctuation marks to help the
browser fit search results to small displays, as found in mobile devices.
.IP \(bu 2
.BR dasht-query-html (1): 
Underline search terms so they stand out in 
.BR w3m (1).
.RE
.SS Patch:
.RS
.IP \(bu 2
.BR dasht-query-exec (1): 
escape SQL single quotes in the search pattern.
.IP \(bu 2
.BR dasht-query-html (1): 
escape HTML entities in search result token name.
.IP \(bu 2
.BR dasht-query-line (1): 
\fB\fCtr \-s\fR squeezes \fIafter\fP translation, not beforehand.
.PP
Searching for \fB\fC% %\fR resulted in SQL LIKE \fB\fC%\\%\\%\fR instead of \fB\fC%\\%%\\%%\fR\&.
.IP \(bu 2
.BR dasht-server-http (1): 
Fix W3C Validator error on scoped \fB\fC<style>\fR element.
.PP
.RS
Error: Element style is missing required attribute scoped.
.RE
.IP \(bu 2
.BR dasht-server-http (1): 
Fix W3C Validator error on docsets \fB\fC<label>\fR element.
.PP
.RS
Error: The label element may contain at most one button, input, keygen,
meter, output, progress, select, or textarea descendant.
.RE
.IP \(bu 2
.BR dasht-server-http (1): 
Specify UTF\-8 charset for special chars in docsets.
.PP
Bash and Docker docsets use the special "…" ellipsis Unicode character.
.IP \(bu 2
.BR dasht-query-html (1): 
Optimize search term highlighting and rework style.
.PP
When an empty pattern was given, useless empty highlights (bold and
italic) were added between every single character in a search result.
.IP \(bu 2
.BR dasht-query-html (1): 
Emulate the IGNORECASE=1 feature for POSIX 
.BR awk (1).
.RE
.SH Version 1.2.0 (2016\-03\-14)
.SS Minor:
.RS
.IP \(bu 2
Added 
.BR dasht-docsets-extract (1) 
script for installing third\-party docsets
and for making sure extracted directory names match docset \fB\fC*.tgz\fR files.
.PP
Docset tarballs downloaded by 
.BR dasht-docset-install (1) 
have no spaces in
their names, so use the same naming scheme for their extracted folders.
Thanks to Martijn Hoogendoorn (@mhoogendoorn) for reporting that such
naming mismatches occur and for suggesting a potential fix in issue #5.
.IP \(bu 2
.BR dasht-docsets-install (1) 
and 
.BR dasht-docsets-remove (1) 
learned \fB\fC\-\-force\fR\&.
.PP
The \fB\fCxargs \-p\fR prompt reads from \fB\fC/dev/tty\fR so it's not easy to automate.
.IP \(bu 2
.BR dasht-docsets-remove (1) 
is now verbose when deleting files because large
docsets (like the Mono docset, sized at 7.6 GiB) take a while to delete.
.IP \(bu 2
.BR dasht-query-line (1) 
now adds default URI fragments to search result URLs,
letting you skip past the mess of navigation links atop these 138 docsets:
.PP
.RS
AWS\fIJavaScript, ActionScript, Akka, Android, Angular.dart, AngularJS,
Ansible, Apache\fPHTTP\fIServer, Appcelerator\fPTitanium, Arduino, Bash,
Boost, Bootstrap\fI2, C, C++, CMake, CSS, CakePHP, Cappuccino, Chai, Chef,
Clojure, Cocos2D, Cocos2D\-X, Cocos3D, CodeIgniter, CoffeeScript,
ColdFusion, Compass, Cordova, Corona, CouchDB, Craft, D3JS, Dart,
Docker, Dojo, Drupal\fP7, Drupal\fI8, ElasticSearch, Elixir, EmberJS,
Erlang, Express, ExpressionEngine, ExtJS, Font\fPAwesome, Foundation,
GLib, Go, Grails, Groovy, Groovy\fIJDK, Grunt, Gulp, HTML, Handlebars,
Haskell, Ionic, Jasmine, JavaFX, JavaScript, Java\fPEE6, Java\fIEE7,
Java\fPSE6, Java\fISE7, Java\fPSE8, Jekyll, Joomla, KnockoutJS, Kobold2D,
Laravel, Less, MarionetteJS, Meteor, MongoDB, Mongoose, Mono, Nginx,
OpenCV\fIC, OpenCV\fPC++, OpenCV\fIJava, OpenCV\fPPython, PHP, PHPUnit, Perl,
Phalcon, PhoneGap, Play\fIJava, Play\fPScala, Polymer.dart, Processing,
PrototypeJS, Puppet, Qt\fI4, Qt\fP5, R, React, Redis, Ruby, Ruby\fI2,
Ruby\fPon\fIRails\fP3, Ruby\fIon\fPRails\fI4, Ruby\fPon\fIRails\fP5, Rust, SQLite, SVG,
SailsJS, Scala, Semantic\fIUI, Sencha\fPTouch, Smarty, Sparrow,
Spring\fIFramework, Statamic, Stylus, Susy, Swift, Symfony, TYPO3, Tcl,
Twig, Twisted, Unity\fP3D, VMware\fIvSphere, VueJS, WordPress, XSLT, XUL,
Xamarin, Xojo, YUI, Yii, Zend\fPFramework\fI1, Zend\fPFramework\fI2, jQuery,
jQuery\fPMobile, jQuery_UI.
.RE
.IP \(bu 2
.BR dasht (1) 
now sets 
.BR w3m (1) 
options to make find\-on\-page more forgiving.
.RE
.SS Patch:
.RS
.IP \(bu 2
.BR dasht-query-exec (1): 
Guides in C++ docset have 0\-length zanchor values.
.PP
This produced URLs with a stray "#" URI fragment separator at the end,
which in turn broke 
.BR w3m (1)'s 
ability to follow links in search results.
.IP \(bu 2
.BR dasht-query-exec (1): 
sqlite 3.7.9 wants options \fIbefore\fP arguments.
.PP
Thanks to @joshpy for reporting this in issue #3 and suggesting the fix.
.IP \(bu 2
.BR dasht-docsets-install (1): 
fix gotcha in shell short\-circuit evaluation.
.PP
Thanks to Edgar Hipp (@netei) for reporting and fixing this in issue #6.
.IP \(bu 2
.BR dasht-docsets-install (1) 
is now visibly faster to install large docsets.
.PP
Don't bother checking whether the docset archive is corrupt or partially
downloaded because 
.BR tar (1) 
will subsequently fail under such cases anyway.
.IP \(bu 2
.BR dasht-server-http (1): 
Search form obscured results in mobile browsers.
.IP \(bu 2
.BR dasht-server-http (1): 
Bold effect on hover slowed graphical browsers.
.RE
.SH Version 1.1.0 (2016\-02\-28)
.PP
This release adds UNIX manpages, improves the UI, and fixes MacOSX support.
.SS Minor:
.RS
.IP \(bu 2
Add "[y/N]" hint to xargs confirmation prompt.  Thanks to Christian
Höppner \[la]https://github.com/mkaito\[ra] for suggesting this improvement.
.IP \(bu 2
Add UNIX manual pages for all scripts, generated using binman \[la]https://sunaku.github.io/binman\[ra]\&.
.RE
.SS Patch:
.RS
.IP \(bu 2
.BR sed (1), 
.BR awk (1), 
et. al. differ in curious ways under MacOSX.  Thanks to
Alaric Holloway \[la]https://github.com/skedastik\[ra] and Kareem Gan \[la]https://github.com/magicalbanana\[ra] for reporting bugs and testing fixes.
.RE
.SH Version 1.0.0 (2016\-01\-24)
.PP
Initial public release of dasht, with stable command line API. :birthday:
